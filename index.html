<html>
  <head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" sizes="32x32" href="https://images.squarespace-cdn.com/content/v1/5bf7c69696d4550b42ef5e43/1546181230787-T4HAEJWN3UZUAHPFZ6BK/rond-png.png">
    <link rel="stylesheet" type="text/css" href="assets/css/style.css">
    <link rel="stylesheet" href="https://use.typekit.net/zbl6ols.css">
    <title>Ticket de concert</title>
  </head>

  <body id="container">

    <div class="configurator">

      <!-- TICKET -->
      <div id="ticket" class="ticket">
        <div class="header">
            <div class="top">
              <div class="infos">
                <span>ID 23871</span>
                <span>DES SOURCES</span>
                <span>MANON</span>
              </div>
              <div class="logo">
                <img src="./assets/images/logos/defensearena.svg"/>
              </div>
            </div>
            <div class="bottom">
              <div class="place">
                <span>67,50€</span>
                <span>CAT 3. RANG 7. PLACE 4.</span>
                <span>Accès violet entrée 33</span>
              </div>
            </div>
        </div>
        <div class="main">
            <div class="infos">
              <div class="title">IMAGINE DRAGONS</div>
              <div class="concert">MERCURY WORLD TOUR</div>
            </div>
            <div class="background">
              <img id="shape" src="./assets/images/shapes/1.svg" alt="Shape">
            </div>
        </div>
        <div class="footer">
          <div class="date">
            <span>22/08/23</span>
            <span>19H00</span>
          </div>
          <div class="barrecode">
            <img src="./assets/images/barrecode.png" alt="barrecode">
          </div>
        </div>
      </div>

      <!-- INTERFACE -->
      <div class="interface">
        <div id="steps" class="step">
          <span class="active">1</span>
          <span>2</span>
          <span>3</span>
        </div>
        <div class="body">
          <div class="main">
            <div class="header">
              <span>Personnaliser son ticket</span>
            </div>
            <div class="buttons">
              <h1>Fond</h1>
              <div class="choices">
                <span class="solo">Sélectionner un fond</span>
                <div class="categories">
                  <div class="category">
                    <div id="backgroundChoices" class="props">
                    </div>
                  </div>
                  <div class="category">
                    <div id="backgroundRandomChoice" class="button imaged">
                      <img src="./assets/images/icons/aléatoire.png" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="buttons hidden">
              <h1>Formes</h1>
              <div class="choices">
                <span class="solo">Sélectionner une forme</span>
                <div class="categories">
                  <div class="category">
                    <div id="shapeChoices" class="props">
                    </div>
                  </div>
                  <div class="category">
                    <div id="shapeRandomChoice" class="button imaged">
                      <img src="./assets/images/icons/aléatoire.png" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="buttons hidden">
              <h1>Composition</h1>
              <div class="choices">
                <span>Titre</span>
                <div class="categories">
                  <div class="category">
                    <span>Typographie</span>
                    <div id="titleTypoChoices" class="props">
                    </div>
                  </div>
                  <div class="category">
                    <span>Couleur</span>
                    <div id="titleColorChoices" class="props">
                    </div>
                  </div>
                </div>
              </div>
              <div class="choices">
                <span>Date</span>
                <div class="categories">
                  <div class="category">
                    <span>Typographie</span>
                    <div id="dateTypoChoices" class="props"></div>
                  </div>
                  <div class="category">
                    <span>Couleur</span>
                    <div id="dateColorChoices" class="props">
                    </div>
                  </div>
                </div>
              </div>
              <div class="choices">
                <span>Corps de texte</span>
                <div class="categories">
                  <div class="category">
                    <span>Typographie</span>
                    <div id="textTypoChoices" class="props">
                    </div>
                  </div>
                  <div class="category">
                    <span>Couleur</span>
                    <div id="textColorChoices" class="props">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="footer">
            <div id="previous" class="button-large hidden">Retour</div>
            <div id="next" class="button-large cta">Etape Suivante</div> <!--deux class différentes modifiables séparemment dans le CSS -->
          </div>
        </div>
      </div>
    </div>

    <script src="./assets/js/script.js"></script>

    <button class="screenshot">Screenshot</button>

  </body>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    function Capture(){
      console.log("capturedecran");
      var canvasPromise = html2canvas(document.body, {
        useCORS: true 
      })

      canvasPromise.then((canvas)=> {
        console.log(canvas);

        var dataURL = canvas.toDataURL("image/jpg"); // transforme notre screen en BASE64
        console.log(dataURL)

        var img = new Image()
        img.src = dataURL;
        img.download = "TicketConcert";

        var a = document.createElement("a");
        a.innerHTML = "DOWNLOAD ton image";
        a.target = "_blank"; // ouvrir dans un nouvel onglet
        a.href = img.src;
        a.download = img.download

        a.click()

      })
    }
    document.querySelector(".screenshot").addEventListener("click",Capture);
  </script>


</html>